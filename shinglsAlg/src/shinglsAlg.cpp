// shinglsAlg.cpp: определяет точку входа для консольного приложения.
//

#include "../headers/stdafx.h"
#include "../src/gsoap_autogenerated/Shingle.nsmap"

int _tmain(int argc, _TCHAR* argv[])
{
	const int SERVICE_PORT = 9999;
	setlocale(LC_ALL, "ru_RU.UTF-8");
    std::auto_ptr<ShingleApp> srv (new ShingleApp());
	srv->loadSampls();
	soap_set_imode(srv, SOAP_C_UTFSTRING);
	soap_set_omode(srv, SOAP_C_UTFSTRING);
	srv->log()->toLog("Server putted up!").endLine().toLogNow().endLine();

    if (srv->run(SERVICE_PORT)){
		srv->log()->toLog("Warning! Server is down at ").toLogNow().endLine();
	};

	srv->saveSampls();

	system("pause");
    return 0;
}

