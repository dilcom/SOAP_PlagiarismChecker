// shinglsAlg.cpp: определяет точку входа для консольного приложения.
//

#include "../src/gsoap_autogenerated/Shingle.nsmap"
#include "../headers/targetver.h"

#include <stdio.h>
#include <tchar.h>
#include <memory>
#include "../headers/shingleApp.h"
#include <locale>

int _tmain(int argc, _TCHAR* argv[])
{
	const int SERVICE_PORT = 9999;
	setlocale(LC_ALL, "ru_RU.UTF-8");
    std::auto_ptr<ShingleApp> srv (new ShingleApp());
	soap_set_imode(srv, SOAP_C_UTFSTRING);
	soap_set_omode(srv, SOAP_C_UTFSTRING);

	srv->log() << "Server putted up!\n" << srv->nowToStr() << '\n';

    if (srv->run(SERVICE_PORT)){
		srv->log() << "Warning! Server is down at " << srv->nowToStr() << '\n';
	};
	system("pause");
    return 0;
}

